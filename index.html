<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thrift Market — 下單測試</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Thrift Market — 下單測試</h1>
  </header>

  <section class="panel">
    <h2>API 設定</h2>
    <div class="row">
      <label>API Base URL：</label>
      <input id="apiBase" placeholder="https://7157ccee3fe0.ngrok-free.app" />
      <button id="saveApiBtn">儲存</button>
    </div>
    <p class="hint">會存到瀏覽器 localStorage；若留空，預設用目前頁面所在來源（不建議）。</p>
  </section>

  <section class="panel">
    <h2>快速下單</h2>
    <div class="row">
      <label>Buyer ID：</label>
      <input id="buyerId" type="number" value="2" />
    </div>
    <div class="row">
      <label>Product ID：</label>
      <input id="productId" type="number" placeholder="例如 1 或 2" />
      <button id="createBtn">建立訂單</button>
    </div>
    <pre id="createResult"></pre>
  </section>

  <!-- 自動載入商品卡片 + 一鍵下單 -->
  <section class="panel">
  <h2>商品列表</h2>
  <div class="row">
    <input id="searchQ" placeholder="搜尋關鍵字（名稱/描述）" />
    <select id="searchStatus">
      <option value="">全部狀態</option>
      <option value="onsale" selected>販售中</option>
      <option value="sold">已售出</option>
      <option value="archived">已下架</option>
    </select>
    <button id="searchBtn">搜尋</button>
  </div>
  <div id="productGrid" class="grid"></div>
  <div class="row" style="justify-content:space-between">
    <button id="prevPageBtn">上一頁</button>
    <span id="pageInfo" class="hint"></span>
    <button id="nextPageBtn">下一頁</button>
  </div>
</section>

  <section class="panel">
  <h2>訂單清單</h2>
  <div class="row">
    <button id="tabBuyer">我的訂單（買家）</button>
    <button id="tabSeller">我的販售（賣家）</button>
    <input id="whoId" type="number" placeholder="輸入你的 user_id，例如買家2 / 賣家1" style="max-width:240px">
    <select id="orderStatus">
      <option value="">全部狀態</option>
      <option value="pending" selected>待確認</option>
      <option value="confirmed">已確認</option>
      <option value="completed">已完成</option>
      <option value="cancelled">已取消</option>
    </select>
    <button id="orderSearch">查詢</button>
  </div>
  <div id="orderList" class="grid"></div>
  <div class="row" style="justify-content:space-between">
    <button id="orderPrev">上一頁</button>
    <span id="orderPageInfo" class="hint"></span>
    <button id="orderNext">下一頁</button>
  </div>
</section>

  <section class="panel">
    <h2>（選擇性）流程操作</h2>
    <div class="row">
      <label>Order ID：</label>
      <input id="orderId" type="number" placeholder="剛建立回傳的 id" />
    </div>
    <div class="row">
      <label>Seller ID：</label>
      <input id="sellerId" type="number" value="1" />
      <button id="confirmBtn">賣家確認</button>
    </div>
    <div class="row">
      <label>By User ID：</label>
      <input id="byUserId" type="number" value="2" />
      <button id="finishBtn">完成交易</button>
    </div>
    <div class="row">
      <button id="cancelBtn">取消訂單</button>
    </div>
    <pre id="flowResult"></pre>
  </section>

  <section class="panel">
    <h2>備註</h2>
    <ul>
      <li>目前用假資料操作（直接輸入 Product ID），商品 1/2 來自我們 seed。</li>
      <li>只有「已上架(onsale)」的商品才能建立訂單；確認後商品會變 <code>sold</code>。</li>
      <li>若你開啟 ngrok，請把上面的 API Base 換成 ngrok 的 HTTPS 網址。</li>
    </ul>
  </section>

  <script src="app.js"></script>
</body>
</html>
